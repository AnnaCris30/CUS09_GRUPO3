
{% extends 'base-user.html' %}
{% block title %}RECAUDACIONES{% endblock %}
{% block header %}

{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/recaudacion.css') }}">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap4.min.css" rel="stylesheet">




<!--Formulario-->
<form class="container-form">
    <!--INFO PERSONAL-->
    <div class="form-apartado" id="info_personal">
        <div class="apartado-titulo">INFORMACIÓN PERSONAL</div>     
        
        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nro documento: </span>
            </label>
            <input 
            id="ndocumento-input"
            name="ndocumento"
            type="text"
            class="form-control"
            required >
        </div> 
        
        <!-- BOTON BUSCAR NRO DOCUMENTO-->
        <div class="buttons button-container">
            <button id="buscar-btn" class="btn btn-primary">           
                    <span class="material-icons">
                    search        
                </span>
                Buscar
            </button>            
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nombre </span>
            </label>
            <input 
            id="nombre-input"
            type="text" name="nombre-input" required readonly
            >
        </div>  

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Banco: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div> 

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Moneda: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div> 

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nro cuenta: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div> 

    </div>

    <!--PREDIO-->
    <div class="form-apartado" id="info_predio">
        <div class="apartado-titulo">INFORMACIÓN DEL PREDIO</div> 

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nombre: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>
              
        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Direccion: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Tipo de Predio: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">RUC: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nro cuenta predio: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>
        
        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Tipo de autorizacion: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Estado: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

    </div>
    
    <!--RECIBO-->
    <div class="form-apartado" id="info_recibo">
        <div class="apartado-titulo">INFORMACIÓN DEL RECIBO</div>
        
        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Nro de recibo: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Estado de recibo: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Importe: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

    </div>

    <!--RECAUDACION-->
    <div class="form-apartado" id="info_recaudacion">
        <div class="apartado-titulo">INFORMACIÓN DE RECAUDACION</div>
        
        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Fecha: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Tipo de Moneda: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Importe: </span>
            </label>
            <input type="text" name=" " required readonly
            value="">
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Estado de recaudacion: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>

        <div class="textInput">
            <label class="input__lbl">
                <span class="txt-lbl">Observacion: </span>
            </label>
            <input 
            name=""
            type="text"
            class="form-control"
             >
        </div>
    </div>
</form>

<!-- Tabla de recaudaciones Pendientes -->
<div class="table-container d-flex justify-content-center">
    <table id="tabla-recaudaciones" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>N°</th>
                <th>Nro recaudacion</th>
                <th>Fecha</th>
                <th>Nombre</th>
                <th>Predio</th>
                <th>Importe</th>
                <th>Estado</th>
                <th>Observacion</th>
                <th>Opciones</th>
            </tr>
        </thead>
        <tbody>
            {% for dato in recaudaciones %}
            <tr>
                <td>{{ '1' }}</td>
                <td>{{ dato.id_recaudacion }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
                <td>{{ 'null' }}</td>
            </tr>
        </tbody>
    </table>
</div>



<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script>
<script>
    $(document).ready(function () {
        $('#tabla-recaudaciones').DataTable();
    });
</script>

<script>
    $(document).ready(function () {
        // Manejar el clic del botón de búsqueda
        $('#buscar-btn').click(function () {
            // Obtener el número de documento ingresado por el usuario
            var numDocumento = $('#ndocumento-input').val();

            // Realizar la solicitud al servidor para buscar el número de documento
            $.post('/buscar', { num_documento: numDocumento }, function (data) {
                // Manejar la respuesta del servidor
                if (data.success) {
                    // Si se encuentra el número de documento, rellenar los campos de INFO PERSONAL
                    var nombres = data.data.nombres;
                    $('#nombre-input').val(nombres);        
                } else {
                    // Si no se encuentra el número de documento, mostrar un mensaje de error
                    alert('Número de documento no encontrado');
                }
            });
        });
    });
</script>



{% endblock %}
